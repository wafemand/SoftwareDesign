# Software Design ITMO

## Лабораторная 2.4.

### Цель: получить практический опыт реализации интеграционных тестов с использованием docker и testcontainers.

Необходимо реализовать информационную систему для торговли на бирже.  
Для простоты, будем считать, что биржа просто хранит некоторый объем акций для каждой компании, у которых может динамически меняться цена.   
Любой пользователь может купить/продать необходимое ему число акций на бирже по текущей цене.  

#### Система состоит из двух частей:
1. Эмулятор биржи, позволяет:
   - Добавлять новые компании и их акции
   - Узнавать текущую цену акций и их количество на бирже
   - Покупать акции компаний по текущей цене
   - Динамически менять курс акций
   Механизм обновления курса может быть любой: можно ходить в реальные сервисы бирж,  
   если найдете открытое api и обновлять; можно написать какой-то рандомайзер, который будет  
   в некотором окне менять курс акций; можно сделать просто админку, через которую  
   стоимость будет меняться вручную.  
2. Личный кабинет пользователя, позволяет:
   - Заводить новых пользователей (заходить можно без авторизации, просто по id)
   - Добавлять денежные средства на счет пользователя
   - Просматривать акции пользователя, их количество и текущую стоимость
   - Просмотреть, сколько сейчас суммарно у пользователя средств, если считать все акции по текущей стоимости
   - Покупать/продавать акции на бирже

Указания:
- Должна быть возможность упаковывать эмулятор биржи в docker-контейнер
- Для личного кабинета необходимо написать интеграционные с биржей тесты, которые  
будут использовать фреймворк testcontainers (https://www.testcontainers.org/) или его  
аналоги. Интеграционные тесты будут запускать эмулятор биржи в docker и ходить в него  

Пример:
- https://github.com/akirakozov/software-design/tree/master/java/test-containers-example - пример mavеn конфига,  
который при сборке добавляет в локальный docker registry java приложение.

Для общего развития, про уровни тестирования и цели интеграционного тестирования:
- https://martinfowler.com/articles/microservice-testing/
- https://martinfowler.com/articles/practical-test-pyramid.html